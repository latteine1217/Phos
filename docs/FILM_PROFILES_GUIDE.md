# Phos è† ç‰‡é…ç½®èªªæ˜æŒ‡å—

> è§£ç­”å¸¸è¦‹å•é¡Œï¼šç‚ºä»€éº¼æœ‰å¤šå€‹ç›¸ä¼¼çš„è† ç‰‡é…ç½®ï¼Ÿå¦‚ä½•é¸æ“‡åˆé©çš„ç‰ˆæœ¬ï¼Ÿ

**æ–‡æª”ç‰ˆæœ¬**: v1.0  
**æ›´æ–°æ—¥æœŸ**: 2025-12-20  
**é©ç”¨ç‰ˆæœ¬**: Phos v0.3.0

---

## ğŸ“‹ ç›®éŒ„

1. [è† ç‰‡é…ç½®ç¸½è¦½](#è† ç‰‡é…ç½®ç¸½è¦½)
2. [ç‚ºä»€éº¼æœ‰å¤šå€‹ Portra400 ç‰ˆæœ¬ï¼Ÿ](#ç‚ºä»€éº¼æœ‰å¤šå€‹-portra400-ç‰ˆæœ¬)
3. [ç‰ˆæœ¬é¸æ“‡æŒ‡å—](#ç‰ˆæœ¬é¸æ“‡æŒ‡å—)
4. [æŠ€è¡“åŸç†èªªæ˜](#æŠ€è¡“åŸç†èªªæ˜)
5. [æ¸…ç†å»ºè­°](#æ¸…ç†å»ºè­°)

---

## è† ç‰‡é…ç½®ç¸½è¦½

### ç•¶å‰è† ç‰‡åº« (13 æ¬¾)

#### å½©è‰²è† ç‰‡ (9 æ¬¾)

| è† ç‰‡åç¨± | ISO | Film Type | ç‰©ç†æ¨¡å¼ | ç”¨é€” | ç‹€æ…‹ |
|---------|-----|-----------|---------|------|------|
| **NC200** | 200 | standard | âœ… P1-2 | å¯Œå£«æ—¥ç³»æ¸…æ–° | ç”Ÿç”¢ |
| **Gold200** | 200 | standard | âœ… P1-2 | Kodak æ—¥å¸¸æš–èª¿ | ç”Ÿç”¢ |
| **Portra400** | 400 | fine_grain | âœ… P1-2 | äººåƒç‹è€…ï¼ˆ**æ¨è–¦ç‰ˆæœ¬**ï¼‰ | ç”Ÿç”¢ |
| **Portra400_MediumPhysics** | 400 | fine_grain | âš ï¸ æ‰‹å‹•é…ç½® | P0-2 æ¸¬è©¦ç”¨é€” | **éæ™‚** |
| **Portra400_MediumPhysics_Mie** | 400 | fine_grain | ğŸ”¬ Mie æŸ¥è¡¨ | P1-1 å¯¦é©—é…ç½® | é–‹ç™¼ä¸­ |
| **Ektar100** | 100 | fine_grain | âœ… P1-2 | é¢¨æ™¯åˆ©å™¨ | ç”Ÿç”¢ |
| **ProImage100** | 100 | fine_grain | âœ… P1-2 | å°ˆæ¥­å½±åƒ | ç”Ÿç”¢ |
| **Velvia50** | 50 | fine_grain | âœ… P1-2 | æ¥µè‡´é£½å’Œ | ç”Ÿç”¢ |
| **Superia400** | 400 | high_speed | âœ… P1-2 | æ—¥å¸¸æ‹æ” | ç”Ÿç”¢ |
| **Cinestill800T** | 800 | high_speed | âœ… P1-2 | é›»å½±è³ªæ„Ÿ | ç”Ÿç”¢ |

#### é»‘ç™½è† ç‰‡ (4 æ¬¾)

| è† ç‰‡åç¨± | ISO | å°æ¯”åº¦ | ç”¨é€” | ç‹€æ…‹ |
|---------|-----|--------|------|------|
| **AS100** | 100 | ä½ | ç´°è†©é»‘ç™½ | ç”Ÿç”¢ |
| **HP5Plus400** | 400 | æ¨™æº– | è¡—æ‹ç¶“å…¸ | ç”Ÿç”¢ |
| **TriX400** | 400 | æ¨™æº– | æ–°èæ”å½± | ç”Ÿç”¢ |
| **FP4Plus125** | 125 | æ¨™æº– | é¢¨æ™¯é»‘ç™½ | ç”Ÿç”¢ |

**åœ–ä¾‹**:
- âœ… P1-2: ä½¿ç”¨ ISO çµ±ä¸€æ¨å°ç³»çµ±ï¼ˆæ¨è–¦ï¼‰
- âš ï¸ æ‰‹å‹•é…ç½®: å›ºå®šåƒæ•¸å€¼ï¼ˆéæ™‚ï¼‰
- ğŸ”¬ å¯¦é©—æ€§: é–‹ç™¼ä¸­åŠŸèƒ½ï¼ˆä¸ç©©å®šï¼‰

---

## ç‚ºä»€éº¼æœ‰å¤šå€‹ Portra400 ç‰ˆæœ¬ï¼Ÿ

### å•é¡Œï¼šç‚ºä»€éº¼è† ç‰‡è¨­å®šä¸­è¦æœ‰ Portra400 è·Ÿ Portra400_MediumPhysics å…©å€‹ç‰ˆæœ¬ï¼Ÿ

**ç­”æ¡ˆ**ï¼šå¯¦éš›ä¸Šæœ‰ **3 å€‹** Portra400 ç‰ˆæœ¬ï¼Œå®ƒå€‘ä»£è¡¨ä¸åŒçš„é–‹ç™¼éšæ®µèˆ‡ç”¨é€”ã€‚

---

### ç‰ˆæœ¬ 1: `Portra400` âœ… **æ¨è–¦ä½¿ç”¨**

**ç¨‹å¼ç¢¼ä½ç½®**: `film_models.py` Line 1170-1199  
**å‰µå»ºæ™‚é–“**: 2025-12-20ï¼ˆP1-2 å®Œæˆï¼‰  
**ç‰©ç†æ¨¡å¼**: `PhysicsMode.PHYSICAL`

#### æŠ€è¡“ç‰¹æ€§
```python
# è‡ªå‹•å¾ ISO æ¨å°æ‰€æœ‰ç‰©ç†åƒæ•¸
bloom_params, halation_params, wavelength_params = create_default_medium_physics_params(
    film_name="Portra400", 
    has_ah_layer=True, 
    iso=400, 
    film_type="fine_grain"  # T-Grain æŠ€è¡“
)
```

#### åƒæ•¸ä¾†æº
- âœ… **é¡†ç²’ç›´å¾‘**: å¾ ISO 400 è‡ªå‹•è¨ˆç®—ï¼ˆd = 0.5 Ã— (400/100)^(1/3) â‰ˆ 0.79 Î¼mï¼‰
- âœ… **æ•£å°„æ¯”ä¾‹**: Mie ç†è«–æ¨å°ï¼ˆscattering_ratio â‰ˆ 0.08ï¼‰
- âœ… **æ³¢é•·ä¾è³´ Bloom**: `WavelengthBloomParams`ï¼ˆè—å…‰æ•£å°„å¼·ï¼‰
- âœ… **Halation å»ºæ¨¡**: Beer-Lambert é€éç‡æ¨¡å‹
- âœ… **èƒ½é‡å®ˆæ†**: èª¤å·® < 0.01%

#### å„ªé»
- ç‰©ç†ä¸€è‡´æ€§ï¼šæ‰€æœ‰åƒæ•¸åŸºæ–¼ ISO å€¼çµ±ä¸€æ¨å°
- å¯ç¶­è­·æ€§ï¼šä¿®æ”¹ ISO å€¼è‡ªå‹•æ›´æ–°æ‰€æœ‰ç›¸é—œåƒæ•¸
- å¯æ“´å±•æ€§ï¼šæ”¯æ´ `create_film_profile_from_iso()` å¿«é€Ÿå‰µå»ºæ–°è† ç‰‡
- æ¸¬è©¦è¦†è“‹ï¼š45/46 tests (97.8%) âœ…

#### é©ç”¨å ´æ™¯
- æ—¥å¸¸ç…§ç‰‡è™•ç†
- äººåƒæ”å½±
- éœ€è¦ä¸€è‡´ç‰©ç†è¡Œç‚ºçš„å·¥ä½œæµç¨‹

---

### ç‰ˆæœ¬ 2: `Portra400_MediumPhysics` âš ï¸ **éæ™‚ç‰ˆæœ¬**

**ç¨‹å¼ç¢¼ä½ç½®**: `film_models.py` Line 1560-1621  
**å‰µå»ºæ™‚é–“**: 2025-12-19ï¼ˆP0-2 æ¸¬è©¦ï¼‰  
**ç‰©ç†æ¨¡å¼**: `PhysicsMode.PHYSICAL`

#### æŠ€è¡“ç‰¹æ€§
```python
# æ‰‹å‹•é…ç½®å›ºå®šåƒæ•¸
bloom_params=BloomParams(
    mode="physical",
    threshold=0.8,
    scattering_ratio=0.08,  # å›ºå®šå€¼
    psf_type="gaussian",
    energy_conservation=True
)

halation_params=HalationParams(
    enabled=True,
    transmittance_r=0.7,    # å›ºå®šå€¼
    transmittance_g=0.5,
    transmittance_b=0.3,
    ah_absorption=0.95,     # å›ºå®šå€¼
    # ...
)
```

#### åƒæ•¸ä¾†æº
- âš ï¸ **å›ºå®šå€¼**: æ‰€æœ‰ç‰©ç†åƒæ•¸æ‰‹å‹•è¨­å®šï¼Œèˆ‡ ISO å€¼ç„¡é—œ
- âš ï¸ **è¤‡è£½é…ç½®**: ä¹³åŠ‘å±¤åƒæ•¸ç›´æ¥è¤‡è£½è‡ª `Portra400`ï¼ˆLine 1565-1580ï¼‰
- âš ï¸ **è¨»è§£èªªæ˜**: "ä¸­ç­‰ç‰©ç†æ¨¡å¼ï¼ˆæ¸¬è©¦é…ç½®ï¼‰ç”¨é€”ï¼šé©—è­‰æ¨™æº–è† ç‰‡çš„ AH å±¤æ•ˆæœ"

#### ç‚ºä½•å­˜åœ¨ï¼Ÿ
é€™æ˜¯ **P0-2 ä»»å‹™**ï¼ˆHalation åˆ†é›¢å»ºæ¨¡ï¼‰çš„æ¸¬è©¦é…ç½®ï¼š
1. ç•¶æ™‚ï¼ˆ2025-12-19ï¼‰å°šæœªå¯¦ç¾ ISO çµ±ä¸€æ¨å°ç³»çµ±
2. éœ€è¦é©—è­‰ Beer-Lambert é€éç‡æ¨¡å‹çš„æ­£ç¢ºæ€§
3. æ‰‹å‹•è¨­å®šåƒæ•¸ä»¥æ’é™¤å…¶ä»–è®Šæ•¸å¹²æ“¾

#### ç‚ºä½•éæ™‚ï¼Ÿ
- P1-2 å®Œæˆå¾Œï¼Œæ¨™æº– `Portra400` å·²æ•´åˆæ‰€æœ‰åŠŸèƒ½
- æ‰‹å‹•é…ç½®åƒæ•¸å®¹æ˜“èˆ‡ ISO å€¼ä¸ä¸€è‡´
- å¢åŠ ç¶­è­·è² æ“”ï¼ˆå…©è™•éœ€åŒæ­¥æ›´æ–°ä¹³åŠ‘å±¤é…ç½®ï¼‰

#### æ¸…ç†å»ºè­°
**å»ºè­°ç§»é™¤æ­¤ç‰ˆæœ¬**ï¼Œç†ç”±ï¼š
- âœ… åŠŸèƒ½å·²è¢«æ¨™æº–ç‰ˆå®Œå…¨è¦†è“‹
- âœ… æ¸¬è©¦ç›®çš„å·²é”æˆï¼ˆP0-2 é©—è­‰å®Œæˆï¼‰
- âœ… é¿å…ä½¿ç”¨è€…æ··æ·†

---

### ç‰ˆæœ¬ 3: `Portra400_MediumPhysics_Mie` ğŸ”¬ **å¯¦é©—ç‰ˆæœ¬**

**ç¨‹å¼ç¢¼ä½ç½®**: `film_models.py` Line 1623-1709  
**å‰µå»ºæ™‚é–“**: 2025-12-19ï¼ˆP1-1 å¯¦é©—ï¼‰  
**ç‰©ç†æ¨¡å¼**: `PhysicsMode.PHYSICAL`

#### æŠ€è¡“ç‰¹æ€§
```python
# ä½¿ç”¨ Mie æ•£å°„ç†è«–æŸ¥è¡¨
bloom_params_p400_mie, halation_params_p400_mie, wavelength_params_p400_mie = \
    compute_bloom_from_mie_lookup(
        grain_diameter_um=0.8,      # AgBr é¡†ç²’ç›´å¾‘
        n_grain=2.253,              # AgBr æŠ˜å°„ç‡ï¼ˆ550nmï¼‰
        n_medium=1.55,              # æ˜è† æŠ˜å°„ç‡
        has_ah_layer=True,
        iso=400
    )
```

#### åƒæ•¸ä¾†æº
- ğŸ”¬ **Mie ç†è«–**: å¾ `mie_lookup_table_v2.npz` æ’å€¼è¨ˆç®—æ•£å°„æ•ˆç‡
- ğŸ”¬ **ç‰©ç†æº–ç¢º**: è€ƒæ…® AgBr ç²’å­å°ºå¯¸åƒæ•¸ï¼ˆx = 2Ï€r/Î»ï¼‰
- ğŸ”¬ **æ³¢é•·æŒ¯ç›ª**: å®Œæ•´æ•æ‰ Mie æ•£å°„çš„æŒ¯ç›ªæ•ˆæ‡‰
- ğŸ”¬ **200 é»æ ¼é»**: é«˜å¯†åº¦æ’å€¼ï¼ˆèª¤å·® 2.16%ï¼‰

#### æŠ€è¡“åŸç†
Mie æ•£å°„ç†è«–é æ¸¬ï¼šå°æ–¼ AgBr ç²’å­ï¼ˆd â‰ˆ 0.8 Î¼mï¼‰ï¼Œè™•æ–¼ **æŒ¯ç›ªå€**ï¼š
- å°ºå¯¸åƒæ•¸ x = Ï€d/Î» â‰ˆ 3.9ï¼ˆç´…å…‰ï¼‰~ 5.6ï¼ˆè—å…‰ï¼‰
- æ•£å°„æ•ˆç‡ Î· å‘ˆæŒ¯ç›ªè®ŠåŒ–ï¼Œå¯èƒ½å°è‡´ **è—å…‰æ•£å°„å¼±æ–¼ç´…å…‰**
- é€™èˆ‡ç¶“é©—å…¬å¼ï¼ˆÎ· âˆ Î»â»Â³Â·âµï¼‰çš„ã€Œè—å…‰æ†å¼·ã€å‡è¨­ç›¸å

#### ç‚ºä½•ä¿ç•™ï¼Ÿ
é€™æ˜¯ **P1-1 ä»»å‹™**ï¼ˆPSF æ³¢é•·ä¾è³´ & Mie æŸ¥è¡¨æ•´åˆï¼‰çš„å¯¦é©—é…ç½®ï¼š
1. é©—è­‰ Mie ç†è«– vs ç¶“é©—å…¬å¼çš„è¦–è¦ºå·®ç•°
2. ç‚ºæœªä¾†å®Œæ•´ Mie æ•£å°„æ•´åˆæä¾›æ¸¬è©¦åŸºæº–
3. ç§‘å­¸ç ”ç©¶èˆ‡ç‰©ç†é©—è­‰ç”¨é€”

#### ä½¿ç”¨å ´æ™¯
- ğŸ”¬ ç‰©ç†ç ”ç©¶èˆ‡é©—è­‰
- ğŸ”¬ è¦–è¦º A/B æ¸¬è©¦ï¼ˆMie vs ç¶“é©—å…¬å¼ï¼‰
- ğŸ”¬ ç§‘å­¸å‡ºç‰ˆç‰©æˆ–æŠ€è¡“å±•ç¤º
- âš ï¸ **ä¸æ¨è–¦æ—¥å¸¸ä½¿ç”¨**ï¼ˆé–‹ç™¼ä¸­ï¼Œå¯èƒ½ä¸ç©©å®šï¼‰

---

## ç‰ˆæœ¬é¸æ“‡æŒ‡å—

### å¿«é€Ÿé¸æ“‡è¡¨

| ä½¿ç”¨å ´æ™¯ | æ¨è–¦ç‰ˆæœ¬ | åŸå›  |
|---------|---------|------|
| **æ—¥å¸¸ç…§ç‰‡è™•ç†** | `Portra400` | ç©©å®šã€ç¶“éæ¸¬è©¦ã€ç‰©ç†ä¸€è‡´ |
| **äººåƒæ”å½±** | `Portra400` | T-Grain ç´°è†©é¡†ç²’ï¼ŒæŸ”å’Œè‰²èª¿ |
| **æ‰¹æ¬¡è™•ç†** | `Portra400` | æœ€ä½³æ•ˆèƒ½èˆ‡ç›¸å®¹æ€§ |
| **å­¸ç¿’è¨ˆç®—å…‰å­¸** | `Portra400` | æ¸…æ™°çš„ç‰©ç†åŸç†ï¼Œå®Œæ•´è¨»è§£ |
| **P0-2 æ¸¬è©¦é©—è­‰** | ~~`Portra400_MediumPhysics`~~ | å·²éæ™‚ï¼Œæ”¹ç”¨æ¨™æº–ç‰ˆ |
| **ç‰©ç†ç ”ç©¶** | `Portra400_MediumPhysics_Mie` | Mie ç†è«–é©—è­‰ |
| **è¦–è¦ºå¯¦é©—** | `Portra400_MediumPhysics_Mie` | æ¯”è¼ƒæ•£å°„æ¨¡å‹å·®ç•° |

### æ±ºç­–æµç¨‹åœ–

```
é–‹å§‹
 â”‚
 â”œâ”€ éœ€è¦æ—¥å¸¸ä½¿ç”¨ï¼Ÿ
 â”‚   â””â”€ YES â†’ ä½¿ç”¨ Portra400 âœ…
 â”‚
 â”œâ”€ éœ€è¦ç‰©ç†ç ”ç©¶ï¼Ÿ
 â”‚   â””â”€ YES â†’ ä½¿ç”¨ Portra400_MediumPhysics_Mie ğŸ”¬
 â”‚
 â””â”€ éœ€è¦ P0-2 æ¸¬è©¦ï¼Ÿ
     â””â”€ YES â†’ æ”¹ç”¨ Portra400ï¼ˆMediumPhysics å·²éæ™‚ï¼‰âš ï¸
```

---

## æŠ€è¡“åŸç†èªªæ˜

### P0-2: Halation åˆ†é›¢å»ºæ¨¡ï¼ˆ2025-12-19ï¼‰

**ç›®æ¨™**: å°‡ Halationï¼ˆç´…æšˆï¼‰å¾ Bloomï¼ˆå…‰æšˆï¼‰ä¸­åˆ†é›¢ï¼Œå»ºç«‹ç¨ç«‹çš„ç‰©ç†æ¨¡å‹ã€‚

**å¯¦ç¾**:
1. **Beer-Lambert é€éç‡**:
   ```python
   T(Î», d) = exp(-Î±(Î») Ã— d)
   # T: é€éç‡
   # Î±: å¸æ”¶ä¿‚æ•¸ï¼ˆæ³¢é•·ä¾è³´ï¼‰
   # d: ä¹³åŠ‘å±¤åšåº¦
   ```

2. **Anti-Halation (AH) å±¤**:
   - 95% å¸æ”¶èƒŒåå°„å…‰
   - é˜²æ­¢å…‰ç·šå¾åº•æ¿åå°„å›ä¹³åŠ‘å±¤

3. **æ³¢é•·ä¾è³´**:
   - ç´…å…‰: é€éç‡é«˜ï¼ˆ70%ï¼‰â†’ å¼·çƒˆç´…æšˆ
   - è—å…‰: é€éç‡ä½ï¼ˆ30%ï¼‰â†’ å¼±è—æšˆ

**æ¸¬è©¦é…ç½®**: `Portra400_MediumPhysics`ï¼ˆç¾å·²è¢«æ¨™æº–ç‰ˆå–ä»£ï¼‰

---

### P1-2: ISO çµ±ä¸€æ¨å°ç³»çµ±ï¼ˆ2025-12-20ï¼‰

**ç›®æ¨™**: å¾ ISO å€¼è‡ªå‹•æ¨å°æ‰€æœ‰é¡†ç²’ç›¸é—œç‰©ç†åƒæ•¸ï¼Œç¢ºä¿ä¸€è‡´æ€§ã€‚

**æ ¸å¿ƒå…¬å¼**ï¼ˆJames 1977ï¼‰:
```python
# 1. é¡†ç²’ç›´å¾‘ï¼ˆÎ¼mï¼‰
d_mean = d0 Ã— (ISO/100)^(1/3)

# è† ç‰‡é¡å‹åŸºæº–ç›´å¾‘ d0:
# - fine_grain:  0.5 Î¼mï¼ˆT-Grain æŠ€è¡“ï¼‰
# - standard:    0.6 Î¼mï¼ˆå‚³çµ±è† ç‰‡ï¼‰
# - high_speed:  0.7 Î¼mï¼ˆé«˜æ„Ÿè† ç‰‡ï¼‰

# 2. è¦–è¦ºé¡†ç²’å¼·åº¦ï¼ˆ0-1ï¼‰
grain_intensity = k Ã— âˆš(d_mean/d0) Ã— âˆš(ISO/100)
# k: è† ç‰‡é¡å‹ä¿‚æ•¸ï¼ˆ0.06-0.10ï¼‰

# 3. æ•£å°„æ¯”ä¾‹ï¼ˆMie ç†è«–ï¼‰
scattering_ratio = 0.04 + 0.04 Ã— (d_mean/d0)Â²
# ç¯„åœ: 0.03-0.15

# 4. Mie å°ºå¯¸åƒæ•¸ï¼ˆx = 2Ï€r/Î»ï¼‰
x_red   = Ï€ Ã— d_mean / 0.650  # ç´…å…‰
x_green = Ï€ Ã— d_mean / 0.550  # ç¶ å…‰
x_blue  = Ï€ Ã— d_mean / 0.450  # è—å…‰
```

**å¯¦ç¾ç‰ˆæœ¬**: `Portra400`ï¼ˆåŠå…¶ä»– 8 æ¬¾è† ç‰‡ï¼‰

**æ¸¬è©¦çµæœ**:
- ISO ç¯„åœ: 50-6400 âœ…
- é¡†ç²’å¼·åº¦å–®èª¿æ€§: 100% é€šé âœ…
- è† ç‰‡é¡å‹æ’åº: fine < standard < high âœ…
- ç‰©ç†åˆ†æ•¸: 7.8 â†’ 8.0/10 (+0.2) â­

---

### P1-1: PSF æ³¢é•·ä¾è³´ & Mie æŸ¥è¡¨æ•´åˆï¼ˆé–‹ç™¼ä¸­ï¼‰

**ç›®æ¨™**: æ•´åˆ Mie æ•£å°„ç†è«–æŸ¥è¡¨ï¼Œå–ä»£ç¶“é©—å…¬å¼ã€‚

**Mie ç†è«– vs ç¶“é©—å…¬å¼**:

| é …ç›® | ç¶“é©—å…¬å¼ | Mie ç†è«– |
|------|---------|---------|
| **å…¬å¼** | Î· âˆ Î»â»Â³Â·âµ | æŸ¥è¡¨æ’å€¼ï¼ˆ200 é»æ ¼é»ï¼‰ |
| **è—å…‰è¡Œç‚º** | æ†å¼·ï¼ˆÎ»â»Â³Â·âµï¼‰ | å¯èƒ½è¼ƒå¼±ï¼ˆæŒ¯ç›ªå€ï¼‰ |
| **ç‰©ç†æº–ç¢ºæ€§** | è¿‘ä¼¼ | åš´æ ¼ |
| **è¨ˆç®—é€Ÿåº¦** | æ¥µå¿« | å¿«ï¼ˆ0.02 msï¼‰ |
| **æ‡‰ç”¨å ´æ™¯** | æ—¥å¸¸è™•ç† | ç§‘å­¸ç ”ç©¶ |

**Mie æŸ¥è¡¨ v2 è¦æ ¼**:
- æ ¼é»æ•¸: 200ï¼ˆvs v1: 21ï¼‰
- æ³¢é•·ç¯„åœ: 400-700 nmï¼ˆvs v1: 450-650 nmï¼‰
- æ’å€¼èª¤å·®: 2.16%ï¼ˆvs v1: 155%ï¼‰
- æª”æ¡ˆå¤§å°: 5.9 KB

**å¯¦ç¾ç‰ˆæœ¬**: `Portra400_MediumPhysics_Mie`ï¼ˆå¯¦é©—æ€§ï¼‰

**è¦–è¦ºå·®ç•°**ï¼ˆé æœŸï¼‰:
- ç¶“é©—å…¬å¼: è—è‰²å…‰æšˆæ˜é¡¯ï¼ˆé¡ Rayleigh æ•£å°„ï¼‰
- Mie ç†è«–: ç´…/è—å…‰æšˆå¹³è¡¡ï¼ˆå–æ±ºæ–¼é¡†ç²’å°ºå¯¸ï¼‰

---

## æ¸…ç†å»ºè­°

### æ–¹æ¡ˆ 1: ç§»é™¤éæ™‚ç‰ˆæœ¬ï¼ˆæ¨è–¦ï¼‰ âœ…

**æ“ä½œ**:
```python
# film_models.py: Line 1560-1621
# åˆªé™¤æ•´å€‹ Portra400_MediumPhysics é…ç½®

# Phos_0.3.0.py: Line 1179
# è† ç‰‡é¸å–®ç§»é™¤æ­¤é …
films_list = [
    "NC200", "Portra400", "Ektar100", ...  # ç§»é™¤ Portra400_MediumPhysics
]
```

**å½±éŸ¿**:
- âœ… æ¸›å°‘ç¨‹å¼ç¢¼è¡Œæ•¸ï¼ˆ~60 è¡Œï¼‰
- âœ… é™ä½ç¶­è­·è² æ“”ï¼ˆç„¡éœ€åŒæ­¥å…©è™•é…ç½®ï¼‰
- âœ… é¿å…ä½¿ç”¨è€…æ··æ·†
- âš ï¸ ç ´å£æ€§è®Šæ›´ï¼ˆè‹¥æœ‰ä½¿ç”¨è€…ä¾è³´æ­¤ç‰ˆæœ¬ï¼‰

**é·ç§»æŒ‡å—**:
```python
# èˆŠç¨‹å¼ç¢¼
film = get_film_profile("Portra400_MediumPhysics")

# æ–°ç¨‹å¼ç¢¼
film = get_film_profile("Portra400")  # åŠŸèƒ½å®Œå…¨ç›¸åŒï¼Œåƒæ•¸æ›´æº–ç¢º
```

---

### æ–¹æ¡ˆ 2: UI ä¸­éš±è—å¯¦é©—ç‰ˆæœ¬

**æ“ä½œ**:
```python
# Phos_0.3.0.py
# ä¸»é¸å–®åƒ…é¡¯ç¤ºç”Ÿç”¢ç‰ˆæœ¬
production_films = ["NC200", "Portra400", "Ektar100", ...]

# æä¾›é€²éšæ¨¡å¼åˆ‡æ›
if st.sidebar.checkbox("ğŸ”¬ é¡¯ç¤ºå¯¦é©—æ€§è† ç‰‡", value=False):
    experimental_films = ["Portra400_MediumPhysics_Mie"]
    films_list = production_films + experimental_films
else:
    films_list = production_films
```

**å½±éŸ¿**:
- âœ… ä¿ç•™å¯¦é©—åŠŸèƒ½
- âœ… é¿å…æ–°æ‰‹æ··æ·†
- âœ… é€²éšä½¿ç”¨è€…å¯é¸æ“‡å•Ÿç”¨
- âœ… ç„¡ç ´å£æ€§è®Šæ›´

---

### æ–¹æ¡ˆ 3: é‡å‘½åä»¥æ˜ç¢ºç”¨é€”

**æ“ä½œ**:
```python
# film_models.py
profiles["Portra400_Experimental_Mie"] = FilmProfile(
    name="Portra400 (Experimental - Mie Lookup)",
    ...
)

# ç§»é™¤ Portra400_MediumPhysics
```

**å½±éŸ¿**:
- âœ… å‘½åæ¸…æ™°è¡¨é”ç”¨é€”
- âœ… é™ä½æ··æ·†
- âš ï¸ ç ´å£æ€§è®Šæ›´ï¼ˆéœ€æ›´æ–°é¸å–®ï¼‰

---

## é™„éŒ„

### A. ç›¸é—œæ–‡ä»¶

- **æŠ€è¡“æ–‡æª”**: `docs/COMPUTATIONAL_OPTICS_TECHNICAL_DOC.md`
- **ç‰©ç†å¯©æŸ¥**: `archive/completed_tasks/TASK-002-physical-improvements/physicist_review.md`
- **æ±ºç­–æ—¥èªŒ**: `context/decisions_log.md` (Decision #016, #020)
- **æ¸¬è©¦æª”æ¡ˆ**: 
  - `tests/test_iso_unification.py` (21 tests)
  - `tests/test_create_film_from_iso.py` (25 tests)

### B. åƒè€ƒæ–‡ç»

1. James, T.H. (1977). *The Theory of the Photographic Process* (4th ed.). Macmillan.
2. ISO 5800:2001. *Photography â€” Colour negative films for still photography*
3. Mie, G. (1908). "BeitrÃ¤ge zur Optik trÃ¼ber Medien, speziell kolloidaler MetallÃ¶sungen". *Annalen der Physik*, 330(3), 377-445.
4. Bohren, C.F. & Huffman, D.R. (1983). *Absorption and Scattering of Light by Small Particles*. Wiley.

### C. ç‰ˆæœ¬æ­·å²

| ç‰ˆæœ¬ | æ—¥æœŸ | è®Šæ›´å…§å®¹ |
|------|------|---------|
| v1.0 | 2025-12-20 | åˆç‰ˆå‰µå»ºï¼šè§£ç­” Portra400 å¤šç‰ˆæœ¬å•é¡Œ |

---

**æ–‡æª”ç¶­è­·è€…**: Main Agent  
**æœ€å¾Œæ›´æ–°**: 2025-12-20 20:45  
**å›é¥‹éƒµç®±**: lyco_p@163.com
